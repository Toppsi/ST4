\section{Spændingsforsyning}\label{spaendingsforsyning}
\textit{I dette afsnit beskrives designet, implementeringen og testen af spændingsforsyningen til MCUen, der agerer som GAP peripheral. Dette gøres med henblik på at opfylde kravene til den eksterne spændingsforsyning.}

Design, implementering og test af spændingsforsyningen udføres med hensyn til de krav, der er opstillet i \secref{krav_spaendingsf}. \newline
Denne komponent skal derfor kunne levere et spændingsoutput, som overholder MCUens inputspænding for aktivering samtidig med, at komponenten overholder krav til mobilitet og brugersikkerhed. Ydermere skal spændingsforsyningen kunne levere den påkrævede spænding i mindst 15 timer. \newline
Den eksterne spændingsforsyning er en udleveret komponent, hvormed design af hardware ikke beskrives. 
%-	Levere mindst 1,71 V og maks 5,5 V til MCU'en21. Der accepteres ikke en spænding
%under minimumsgrænsen eller over maksimumsgrænsen.
%-	Være i stand til at levere denne spænding i mindst 15 timer. Der accepteres ikke, at
%spændingsforsyningen leverer under 1,71 V eller over 5,5 V i mindre end 15 timer.
%-	Være mobil og dermed besidde en opsætning udenom elnettet, hvilket gør systemet mere
%elektrisk sikkert. Der accepteres ikke, at systemet skal kobles til elnettet og derved ikke
%være mobilt.

\subsection{Design}
MCUen er funktionel ved en spændingstilførsel på 1,71-5,5~V \citep{Semiconductor20164200M,Semiconductor2016PRoC}. Den ene MCU, GAP central, tilsluttes USB, hvormed den får en spænding på 5~V herigennem \citep{Semiconductor2016}. Derimod skal MCUen GAP peripheral tilkobles en spændingskilde, da denne skal være en ekstern enhed. Spændingsforsyningen skal derfor levere en spænding indenfor det foreskrevne interval. Ydermere vil det blot være MCUens targetboard, som er funktionel ved en ekstern spændingsforsyning.

Den eksterne spændingsforsyning er en batteriholder til to AAA 1,5~V batterier, som har tilkoblet jord og spændingsoutput. Denne komponent er dermed ikke tilkoblet elnettet, hvorfor der er minimal risiko for et farligt elektrisk shock. Yderligere er spændingsforsyningen en mindre komponent, hvilket gør den mobil og anvendeligt i et mobilt system.

\subsection{Implementering}
For at kunne forsyne targetboardet på GAP peripheral med spænding skal pins fra spændingsforsyningen forbindes med pins på MCUen. Spændingsforsyningens to pins (GND og V$_{out}$) bliver tilkoblet pinrække J1 på targeboardet, hvor pin VDD og GND bliver benyttet.

\subsection{Test} 
%Testen udføres med henblik på at overholde de opstillede krav med henhold til de opstillede afvigelser. 
Testen udføres med henhold til de opstillede krav og tilhørende tilladte afvigelser opstillet i \secref{krav_spaendingsf}. Kravene beskriver, at spændingsforsyningen skal:
\begin{enumerate}
	\item Levere mindst 1,71~V og maks 5,5~V til MCUen\fxnote{Alle mikroprocessorer kræver 1,71-5,5~V for at kunne fungere, selvom der står 3,3-5,5~V i databladet for mikroprocessoren.}. Der accepteres ikke en spænding under minimumsgrænsen eller over maksimumsgrænsen. %en tilstrækkelig spænding til alle systemets aktive komponenter, og må varierer med $\pm$5\%.
	\item Være i stand til at levere denne spænding i mindst 15 timer. Der accepteres ikke, at spændingsforsyningen leverer under 1,71 V eller over 5,5~V i mindre end 15 timer.
	%\item Muliggøre spændingsopsætning af systemet udenom elnettet og	være elektrisk sikkert.
	\item Være mobil og dermed besidde en opsætning udenom elnettet, hvilket gør systemet mere elektrisk sikkert. Der accepteres ikke, at systemet skal kobles til elnettet og derved ikke være mobilt.
\end{enumerate}

Det undersøges hvilket spændingsoutput den udleverede komponent har, ved benyttelse af to nye AAA 1,5~V batterier. Testen viser her, at komponenten har et spændingsoutput på 3,14~V ved disse betingelser.\newline
Spændingsforsyningen overholder dermed kravet om, at levere en spænding til MCUen i intervallet 1,7-5,5~V.\fxnote{Vi skal have lavet en test hvor komponenterne er sat til, og man derefter noterer hvor meget spænding batterierne taber undervejs. Testen skal fx vare 10 minutter. }




