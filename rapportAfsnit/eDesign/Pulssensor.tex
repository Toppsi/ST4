\section{Pulssensor}
\textit{I dette afsnit beskrives designet, implementeringen og testen af den valgte pulssensor.}

\subsection{Design}
Pulssensoren SEN-11574 er valgt til dette projekt, da det er en optisk pulssensor og er derfor mere sikker for brugeren, som beskrevet i \secref{sec:pulssensor}. Derudover er en optisk pulssensor mere alsidig i forhold til placering, da den blot skal placeres over en arterie. Pulssensoren kræver 3 til 5 V for at være funktionel og forbruger 4 mA ved en forsyning på 5V. På sensorens board findes et aktivt filter\fxnote{Et aktivt filter er en type af analog elektronisk filter, der anvender aktive bestanddele, såsom en forstærker.} samt en forstærker, som tilsammen øger amplituden for pulsbølgen og normaliserer signalet omkring et referencepunkt, hvilket fjerne al DC spænding i signalet. Herved fremkommer en tydelig pulsbølge direkte fra sensoren, som umiddelbart ikke kræver behandling af signalet for at kunne detektere. \citep{Murphy2016,Murphy2016_sensor}

Pulssensoren skal benyttes til at beskrive intensiteten af aktiviteten, som beskrevet i \secref{subsub:ak_int}. Herudfra kan effekten af aktiviteten bestemmes, hvilket kan have en motiverende faktor for brugeren. \\
Sensoren har 3 pins til henholdsvis spændingsforsyning, ground og outputsignal, som skal kobles med MCU'en. Outputsignalets pin skal designes i programmet PSoC Creater, således MCU'en kan finde ud af at modtage signalet fra denne pin. Dette gøres ved at indsætte henholdsvis en UART serie kommunikationsblok (SCB) og SAR ADC i topdesignet. UART'en bruges for at sensoren og MCU'en kan kommunikere og er tilpasset formålet fra standart. Puls data skal igennem en ADC, da det er et analog signal, der fortsætter så længe sensoren modtager en spænding. Dennes design skal derfor tilpasses pulssensoren, hvilket gøres ved at væge antallet af kanaler og samplerate. I dette tilfælde skal der benyttes én kanal, som er single ended, og ADC'ens samplingsfrekvens sættes til 35 SPS. ADC'ens samplingsfrekvens vælges ud fra, at en persons makspuls kan beregnes med 220 - alder \citep{CooperBlair2005}. Ud fra målgruppen vurderes det, at makspulsen altså er cirka 210, som svarer til tre et halvt slag pr sekund. Det vurderes at ti samples per puls giver et præsentabelt resultat, hvilket derved giver 35 SPS.\\
Efter UART og ADC er konfigureret i topdesignet, skal de korrekte pins indstilles i pinopsætning. UART pins får typisk tildelte pins, hvorimod ADC'ens inputpin skal indstilles til den plads, som outputtet fra sensoren er. \\

Igennem et matlab program er det muligt at visualisere pulsen ved hjælp af en GUI. I det samlede system skal denne GUI ikke være tilgængelig her i processen, da GAB peripheral modtager pulsdata og sender dette videre sammen med IC data til GAB central, som skal visualisere data i en endelig GUI.
% Vigtig viden om vores specifikke pulssensor
% Hvordan vi skal bruge den og hvordan dataen herfra skal behandles
% implementering på MCU
\subsection{Test}
% Test af krav


% Grimme hjemmeside \citep{Murphy2016}
% \cite{Murphy2016_sensor}